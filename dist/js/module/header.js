"use strict";define(["jquery","cookie"],function(o){function n(){var n=this;this.container=o("#header-container"),this.load().then(function(){n.search(),n.isLogin(),n.calcCartNum()})}return o.extend(n.prototype,{load:function(){var t=this;return new Promise(function(n){t.container.load("/html/module/header.html",function(){n()})})},search:function(){o("#search-input").on("keyup",function(){var n=o(this).val();o.getJSON("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?cb=?&wd="+n,function(n){console.log(n)})})},isLogin:function(){var n=this;this.loginBtn=o("#login-btn"),this.afterLogin=o("#after-login"),this.nameSpan=o("#name"),this.logout=o("#exit");var t=o.cookie("username");t&&(this.loginBtn.hide(),this.afterLogin.show(),this.nameSpan.html(t)),this.logout.on("click",function(){confirm("确定要退出吗？")&&(o.removeCookie("username",{path:"/"}),n.loginBtn.show(),n.afterLogin.hide())})},calcCartNum:function(){var n=localStorage.getItem("cart"),t=0;n&&(t=(n=JSON.parse(n)).reduce(function(n,t){return n+=t.num},0)),o("#car-num").html(t)}}),new n});