"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}require(["require.config"],function(){require(["url","template","header","footer","zoom","fly"],function(t,n,a){new(function(){function e(){_classCallCheck(this,e),this.getType(),this.addCart()}return _createClass(e,[{key:"getType",value:function(){var n=this,r=Number(location.search.slice(4));$.get(t.rapBaseUrl+"details/type",{id:r},function(e){if(1===e.res_code){var t=e.res_body.data;t=_objectSpread({},t,{id:r}),n.data=t,n.renderType(t)}})}},{key:"renderType",value:function(e){$("#details-container").html(n("list-details",{data:e})),this.zoom(),this.Binds()}},{key:"Binds",value:function(){$("#details-container").on("click",".count_plus",function(){var e=$(this).prev().children(".shop_count").val();$(this).prev().children(".shop_count").val(++e)}),$("#details-container").on("click",".count_minus",function(){var e=$(this).next().children(".shop_count").val();--e<1&&(e=1),$(this).next().children(".shop_count").val(e)})}},{key:"addCart",value:function(){var o=this;$("#details-container").on("click","#shopcart",function(e){$("<img src='".concat(o.data.image[0],"' style='width:20px;height:20px'>")).fly({start:{left:e.clientX,top:e.clientY},end:{left:$("#cart-num").offset().left,top:$("#cart-num").offset().top},onEnd:function(){this.destroy(),a.calcCartNum()}});var t=localStorage.getItem("cart"),n=Number($(".shop_count").val());if(console.log(n),t){t=JSON.parse(t);var r=-1;t.some(function(e,t){return r=t,e.id===o.data.id})?t[r].num+=n:t.push(_objectSpread({},o.data,{num:n}))}else t=[_objectSpread({},o.data,{num:n})];localStorage.setItem("cart",JSON.stringify(t))})}},{key:"zoom",value:function(){$(".zoom-img").elevateZoom({gallery:"gal1",cursor:"pointer",galleryActiveClass:"active",borderSize:"1",borderColor:"#e0e0e0",imageCrossfade:!0,scrollZoom:!0})}}]),e}())})});